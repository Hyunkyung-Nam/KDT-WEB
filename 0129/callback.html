<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
    </head>
    <body>
        <script>
            //setTimeout(code, delay) delay 시간동안 기다렸다가 코드 실행
            console.log(1);
            setTimeout(() => {
                console.log(2);
            }, 2000);
            // setTimeout(function (){
            //     console.log(2);
            // }, 2000); 위에는 화살표함수, 아래는 익명함수
            console.log(3);

            //편의점에 들어가서 음료수를 사고 나오는 상황
            function goMart() {
                console.log('마트에가서 어떤 음료수를 살지 고민한다.');
            }

            function pickDrink() {
                setTimeout(() => {
                    console.log('고민 끝');
                    product = '코카 콜라';
                    price = 2000;
                });
            }

            function pay(product, price) {
                console.log(`상품명 : ${product}, 가격 : ${price}`);
            }

            let product, price;

            goMart();
            pickDrink();
            pay(product, price);

            //콜백함수 : 함수타입 파라미터 맨 마지막에 하나 더 선언
            // 다른 함수가 실행을 끝낸 후 실행 되는 함수

            function mainFunc(param1, param2, callback) {
                console.log(param1, param2);
                callback();
            }

            function callbackFunc() {
                console.log('콜백함수입니다.');
            }

            mainFunc(1, 2, callbackFunc);

            function newPickDrink(callback) {
                setTimeout(() => {
                    console.log('고민 끝');
                    product = '코카 콜라';
                    price = 2000;
                    callback(product, price); //콜백함수로 pay함수 실행
                });
            }

            goMart();
            newPickDrink(pay);

            function newNewPickDrink(callback) {
                setTimeout(() => {
                    console.log('고민 끝');
                    product = '환타';
                    price = 5000;
                    callback(product, price); //콜백함수로 pay함수 실행
                });
            }
            goMart();
            newNewPickDrink(function (product, price) {
                console.log(`상품명 : ${product}, 가격 : ${price}`);
            });

            //콜백지옥
            setTimeout(() => {
                document.body.style.backgroundColor = 'red';
                setTimeout(() => {
                    document.body.style.backgroundColor = 'orange';
                    setTimeout(() => {
                        document.body.style.backgroundColor = 'yellow';
                        setTimeout(() => {
                            document.body.style.backgroundColor = 'green';
                            setTimeout(() => {
                                document.body.style.backgroundColor = 'blue';
                                setTimeout(() => {
                                    document.body.style.backgroundColor = 'navy';
                                    setTimeout(() => {
                                        document.body.style.backgroundColor = 'purple';
                                    }, 2000);
                                }, 2000);
                            }, 2000);
                        }, 2000);
                    }, 2000);
                }, 2000);
            }, 2000);
        </script>
    </body>
</html>
